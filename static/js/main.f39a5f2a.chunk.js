(this["webpackJsonpApp Despesas"]=this["webpackJsonpApp Despesas"]||[]).push([[0],{33:function(e,t,a){e.exports=a(46)},42:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),l=a.n(c),i=a(12),o=a(18),u=(a(42),a(7)),s=a(8),d=a(10),p=a(9),m=a(2),h=a(17),E=a(3);var b=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).state={emailInputText:"",password:""},e.handleChange=e.handleChange.bind(Object(E.a)(e)),e.validateEmail=e.validateEmail.bind(Object(E.a)(e)),e}return Object(s.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(h.a)({},a,n))}},{key:"validateEmail",value:function(e){return/\S+@\S+\.\S+/.test(e)}},{key:"render",value:function(){var e=this.state,t=e.password,a=e.emailInputText,n=this.props.dispatchUserEmail;return r.a.createElement("div",null,r.a.createElement("form",{className:"form__group field"},r.a.createElement("label",{htmlFor:"email-input",className:"form__label"},r.a.createElement("input",{type:"email",name:"emailInputText",placeholder:"Email","data-testid":"email-input",required:!0,className:"form__field",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"password-input",className:"form__label"},r.a.createElement("input",{type:"password",name:"password",minLength:"6",placeholder:"Senha","data-testid":"password-input",required:!0,className:"form__field",onChange:this.handleChange})),r.a.createElement(o.b,{to:"/carteira"},r.a.createElement("button",{type:"submit",disabled:!(this.validateEmail(a)&&t.length>=6),onClick:function(){return n(a)}},"Entrar"))))}}]),a}(r.a.Component),v=Object(i.b)(null,(function(e){return{dispatchUserEmail:function(t){return e(function(e){return{type:"LOGIN_EMAIL",email:e}}(t))}}}))(b),f=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).totalSum=e.totalSum.bind(Object(E.a)(e)),e}return Object(s.a)(a,[{key:"totalSum",value:function(){var e=this.props.wallet.expenses,t=0;return e.forEach((function(e){t+=Number(e.value*e.exchangeRates[e.currency].ask)})),t.toFixed(2)}},{key:"render",value:function(){var e=this.props.email;return r.a.createElement("header",null,r.a.createElement("h2",null,"TrybeWallet"),r.a.createElement("h3",{"data-testid":"total-field"},"Despesa total: R$",this.totalSum()),r.a.createElement("p",{"data-testid":"email-field"},e))}}]),a}(r.a.Component),y=Object(i.b)((function(e){return{email:e.user.email,wallet:e.wallet}}))(f),O=a(15),g=a.n(O),j=a(20),C=function(){var e=Object(j.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).state={id:0,value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e.handleChange=e.handleChange.bind(Object(E.a)(e)),e.addExpense=e.addExpense.bind(Object(E.a)(e)),e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getCurrencies()}},{key:"getCurrencies",value:function(){var e=Object(j.a)(g.a.mark((function e(){var t,a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.saveCurrencies,e.next=3,C();case 3:a=e.sent,n=Object.keys(a),t(n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(h.a)({},a,n))}},{key:"addExpense",value:function(){var e=Object(j.a)(g.a.mark((function e(t){var a,n,r,c,l,i,o,u,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.state,n=a.id,r=a.value,c=a.currency,l=a.description,i=a.method,o=a.tag,e.next=4,C();case 4:u=e.sent,s={id:n,value:r,description:l,currency:c,method:i,tag:o,exchangeRates:u},(0,this.props.dispatchExpense)(s),this.setState({id:s.id+1,value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"methodSelectorInput",value:function(){return r.a.createElement("label",{htmlFor:"method-input"},"Forma de pagamento:",r.a.createElement("select",{name:"method","data-testid":"method-input",id:"method-input",onChange:this.handleChange},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito")))}},{key:"tagSelectorInputs",value:function(){return r.a.createElement("label",{htmlFor:"tag-input"},"Categoria:",r.a.createElement("select",{name:"tag","data-testid":"tag-input",id:"tag-input",onChange:this.handleChange},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade")))}},{key:"renderCurrenciesOptions",value:function(){return this.props.currencies.filter((function(e){return"USDT"!==e})).map((function(e,t){return r.a.createElement("option",{key:t,value:e,"data-testid":e},e)}))}},{key:"render",value:function(){var e=this,t=this.state.currency;return r.a.createElement("form",{onSubmit:function(t){return e.addExpense(t)}},r.a.createElement("label",{htmlFor:"description-input"},"Descri\xe7\xe3o:",r.a.createElement("input",{type:"textarea",name:"description",onChange:this.handleChange,"data-testid":"description-input",id:"description-input"})),r.a.createElement("label",{htmlFor:"value-input"},"Valor da Despesa:",r.a.createElement("input",{type:"text",name:"value",onChange:this.handleChange,"data-testid":"value-input",id:"value-input"})),r.a.createElement("label",{htmlFor:"moeda"},"Moeda",r.a.createElement("select",{id:"moeda",type:"select",name:"currency",onChange:this.handleChange,value:t,"data-testid":"currency-input"},this.renderCurrenciesOptions())),this.tagSelectorInputs(),this.methodSelectorInput(),r.a.createElement("button",{type:"submit"},"Adicionar despesa"))}}]),a}(r.a.Component),k=Object(i.b)((function(e){return{currencies:e.wallet.currencies}}),(function(e){return{saveCurrencies:function(t){return e({type:"ADD_CURRENCIES",payload:t})},dispatchExpense:function(t){return e({type:"SAVE_EXPENSE",payload:t})}}}))(x),w=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).renderColumns=n.renderColumns.bind(Object(E.a)(n)),n.changeUSDandEUR=n.changeUSDandEUR.bind(Object(E.a)(n)),n.renderRows=n.renderRows.bind(Object(E.a)(n)),n.deleteExpenseFunc=n.deleteExpenseFunc.bind(Object(E.a)(n)),n}return Object(s.a)(a,[{key:"deleteExpenseFunc",value:function(e){var t=e.current,a=e.remove;(0,this.props.deleteExpenseDispatch)(t.filter((function(e){return e.id!==a.id})))}},{key:"changeUSDandEUR",value:function(e){return"USD"===e?"D\xf3lar Comercial":"EUR"===e?"Euro":e}},{key:"renderRows",value:function(){var e=this,t=this.props.expenses;return t.map((function(a){return r.a.createElement("tr",{key:a.id},r.a.createElement("td",null,a.description),r.a.createElement("td",null,a.tag),r.a.createElement("td",null,a.method),r.a.createElement("td",null,a.value),r.a.createElement("td",null,e.changeUSDandEUR(a.currency)),r.a.createElement("td",null,parseFloat(a.exchangeRates[a.currency].ask).toFixed(2)),r.a.createElement("td",null,parseFloat(a.value*a.exchangeRates[a.currency].ask).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"delete-btn",onClick:function(){return e.deleteExpenseFunc({remove:a,current:t})}},"Deletar despesa")))}))}},{key:"renderColumns",value:function(){return["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Editar/Excluir"].map((function(e){return r.a.createElement("th",{key:e},e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"table-wrapper"},r.a.createElement("table",{border:"1",className:"fl-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,this.renderColumns())),r.a.createElement("tbody",null,this.renderRows())))}}]),a}(r.a.Component),S=Object(i.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteExpenseDispatch:function(t){return e({type:"REMOVE_EXPENSE",payload:t})}}}))(w),D=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y,null),r.a.createElement(k,null),r.a.createElement(S,null))}}]),a}(r.a.Component),R=(a(45),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/appdespesas",component:v}),r.a.createElement(m.a,{exact:!0,path:"/carteira",component:D}))}}]),a}(r.a.Component)),_=a(14),F=a(30),U=a(31),N=a(13),I={email:""},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_EMAIL":return Object(N.a)(Object(N.a)({},e),{},{email:t.email});default:return e}},T=a(32),M={currencies:[],expenses:[]},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_EXPENSE":return Object(N.a)(Object(N.a)({},e),{},{expenses:[].concat(Object(T.a)(e.expenses),[t.payload])});case"ADD_CURRENCIES":return Object(N.a)(Object(N.a)({},e),{},{currencies:t.payload});case"REMOVE_EXPENSE":return Object(N.a)(Object(N.a)({},e),{},{expenses:t.payload});default:return e}},V=Object(_.combineReducers)({user:A,wallet:L}),P=Object(_.createStore)(V,Object(F.composeWithDevTools)(Object(_.applyMiddleware)(U.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(o.a,null,r.a.createElement(i.a,{store:P},r.a.createElement(R,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.f39a5f2a.chunk.js.map